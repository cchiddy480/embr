# Dev Log â€” 2025-01-27

Scope: WildRoots Festival demo stabilization, Embr Hub visual baseline restoration, and guardrails.

## Changes
- Hub: Restored pre-LiftKit styling (globals, layout, loading, home, access modal).
- Hub: Fixed dev 404s by disabling static export in dev.
- Hub: Prevented indefinite loading via timeout; enhanced escape mechanism (bigger hitbox, double-escape, double/right click).
- Hub: Access Code modal contrast/padding/typography aligned to backup; button parity with Scan QR.
- Client (WildRoots): Removed background banding by setting html/body background to client theme while mounted and using `min-h-[100dvh]`.
- Rules: Introduced `.cursorrules` and added hybrid model, session-start checklist, hub baseline guardrails, and focus policy.
- Docs: Added HUB APP VISUAL BASELINE to the Ledger; created Dev Log index (`DEV_LOG.md`).

## Decisions
- Lock Hub visuals as baseline; Hub does not inherit client theming.
- Client theming is applied inside `ClientApp` only and must own the canvas while active.
- Next.js export settings enabled only when building for export.
- Focus outlines are allowed on filled and ghost controls, but must use `--embr-button-outline-color` and only appear on `:focus-visible` (no Tailwind `ring-*`).
- Maintain a daily Dev Log and review it alongside the Knowledge Ledger at the start of every session.

## Follow-ups (Safeguards to implement next)
- CI theming audit (fail on hardcoded colors, `ring-*`, or non-token usage in client code).
- Theme Sandbox page to render all EmbrKit components + common hybrid blocks under client themes.
- Visual snapshot tests across 3 themes (light, dark, high-contrast).
- Stylelint rule set to disallow hardcoded colors in client code.
- PR checklist enforcing hub baseline check + keyboard-focus pass.

## Files touched
- packages/hub-app/src/app/globals.css
- packages/hub-app/src/app/layout.tsx
- packages/hub-app/src/app/page.tsx
- packages/hub-app/src/components/LoadingScreen.tsx
- packages/hub-app/src/components/AccessCodeEntry.tsx
- packages/hub-app/src/components/ClientApp.tsx
- packages/hub-app/next.config.js
- EMBR_KNOWLEDGE_LEDGER.md (HUB APP VISUAL BASELINE)

